import{u as E,j as r,a as e,b as I,d as O,e as T,f as W,g as H,h as V,i as z}from"./index-DyGpK1eB.js";import{r as n,b as Q}from"./react-vendor-DazevGLP.js";import{R as U,a as q,aa as X,ab as Y,ac as _,ad as M,ae as F,af as J}from"./icons-C8ZOEJji.js";import{P as K}from"./PromptErrorBoundary-gE7WPNpD.js";import{c as Z,a as ee}from"./react-router-CnSiAemH.js";import"./ui-vendor-CqUwgBM-.js";import"./utils-Sp7XtC9M.js";const te=(s,g={})=>{const{maxRetries:m=3,retryDelay:u=1e3,exponentialBackoff:h=!0,onRetry:o,onMaxRetriesReached:l,onSuccess:i,onError:x}=g,{addError:a}=E(),f=n.useRef(),[d,v]=n.useState({isLoading:!1,error:null,retryCount:0,canRetry:!0,lastAttempt:null}),C=n.useCallback(w=>h?u*Math.pow(2,w-1):u,[u,h]),p=n.useCallback(async(w=!1)=>{const N=w?d.retryCount+1:1;v(k=>({...k,isLoading:!0,error:null,retryCount:N,lastAttempt:new Date}));try{const k=await s();return v(b=>({...b,isLoading:!1,error:null,canRetry:!0})),i?.(),k}catch(k){const b=k,$=N<m;throw v(S=>({...S,isLoading:!1,error:b,canRetry:$})),x?.(b,N),$?a(`Operation failed (attempt ${N}/${m}). Retrying...`,"warning","ErrorRecovery"):(a(`Operation failed after ${m} attempts: ${b.message}`,"error","ErrorRecovery"),l?.()),b}},[s,d.retryCount,m,a,x,i,l]),L=n.useCallback(()=>{if(!d.canRetry||d.isLoading)return;o?.(d.retryCount+1);const w=C(d.retryCount+1);f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{p(!0).catch(()=>{})},w)},[d.canRetry,d.isLoading,d.retryCount,C,p,o]),y=n.useCallback(()=>{f.current&&clearTimeout(f.current),v({isLoading:!1,error:null,retryCount:0,canRetry:!0,lastAttempt:null})},[]),R=n.useCallback(()=>{d.canRetry&&!d.isLoading&&L()},[d.canRetry,d.isLoading,L]);return{...d,execute:p,retry:L,autoRetry:R,reset:y,nextRetryDelay:d.canRetry?C(d.retryCount+1):null}},re=(s,g={})=>{const{actionName:m="Action",showSuccessMessage:u=!0,...h}=g,{addInfo:o}=E();return te(s,{maxRetries:2,retryDelay:500,exponentialBackoff:!1,...h,onSuccess:()=>{u&&o(`${m} completed successfully`,"info","UserAction"),h.onSuccess?.()},onError:(l,i)=>{console.log(`${m} failed on attempt ${i}:`,l.message),h.onError?.(l,i)}})},B=n.memo(({prompt:s,onCopy:g,onOpenInNewTab:m})=>{const[u,h]=n.useState(!1),{addError:o}=E(),l=re(async()=>{await navigator.clipboard.writeText(s.prompt),h(!0),setTimeout(()=>h(!1),2e3),g?.()},{actionName:"Copy Prompt",showSuccessMessage:!1,maxRetries:2,onError:a=>{o("Failed to copy prompt to clipboard. Please try selecting and copying manually.","warning","PromptCard")}}),i=n.useCallback(()=>{l.execute().catch(()=>{})},[l]),x=n.useCallback(()=>{try{m&&m()}catch(a){console.error("Failed to open prompt in new tab:",a),o("Failed to open prompt in new tab. Please try again.","warning","PromptCard")}},[m,o]);return r("div",{className:"bg-gray-800/50 border border-gray-700/50 rounded-lg p-4 flex flex-col justify-between transition-all hover:border-purple-500/50 h-full",children:[r("div",{children:[e("h3",{className:"font-semibold text-white mb-2",children:s.title}),e("p",{className:"text-sm text-gray-400 line-clamp-2 mb-4",children:s.description})]}),r("div",{className:"flex items-center justify-between mt-auto pt-4 border-t border-gray-700/50",children:[r("div",{className:"flex flex-wrap items-center gap-2",children:[s.difficulty&&e("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${["Very Easy","Easy","Moderate"].includes(s.difficulty)?"bg-green-900/50 text-green-300":["Challenging","Advanced"].includes(s.difficulty)?"bg-blue-900/50 text-blue-300":"bg-purple-900/50 text-purple-300"}`,children:s.difficulty}),s.tags?.map(a=>r("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-700/50 text-gray-300",children:["#",a]},a))]}),r("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e("button",{onClick:i,disabled:l.isLoading,className:`p-2 transition-colors rounded-md relative ${l.isLoading?"text-gray-500 cursor-not-allowed":l.error?"text-red-400 hover:text-red-300 hover:bg-red-900/20":"text-gray-400 hover:text-white hover:bg-gray-700"}`,title:l.isLoading?"Copying...":l.error?"Copy failed - click to retry":u?"Copied!":"Copy Prompt",children:l.isLoading?e(U,{className:"w-4 h-4 animate-spin"}):l.error?e(q,{className:"w-4 h-4"}):u?e(X,{className:"w-4 h-4 text-green-400"}):e(Y,{className:"w-4 h-4"})}),e("button",{onClick:x,className:"p-2 text-gray-400 hover:text-white transition-colors rounded-md hover:bg-gray-700",title:"Open in new tab",children:e(_,{className:"w-4 h-4"})})]})]})]})});B.displayName="PromptCard";const de=()=>{const{id:s}=Z(),g=ee(),{addError:m}=E(),[u,h]=n.useState(""),[o,l]=n.useState(null),[i,x]=n.useState(null),[a,f]=n.useState(null),d=I(u,300),{data:v,loading:C}=O(),p=T(()=>v?.find(t=>t.id===s),[v,s]);n.useEffect(()=>{p?.subcategories?.length&&!a&&f(p.subcategories[0])},[p,a]);const L=n.useMemo(()=>a?.promptGroups?a.promptGroups:[],[a]),{data:y,loading:R,error:w}=W({subcategoryId:a?.id,filters:{difficulty:i||void 0,promptGroupId:o||void 0,searchQuery:d.trim()||void 0},enabled:!!a}),{preloadCategory:N}=H();n.useEffect(()=>{s&&N(s).catch(()=>{})},[s,N]);const k=V(async t=>{try{await navigator.clipboard.writeText(t)}catch(c){console.error("Failed to copy text: ",c),m("Failed to copy prompt to clipboard. Please try selecting and copying manually.","warning","CategoryPage")}},[m]),b=n.useCallback(t=>{const c=A=>{const P=A.toLowerCase();return P.includes("beginner")||P.includes("easy")?"bg-green-900/30 text-green-400":P.includes("intermediate")||P.includes("moderate")?"bg-yellow-900/30 text-yellow-400":"bg-red-900/30 text-red-400"},G=window.open("","_blank");G&&(G.document.write(`
        <!DOCTYPE html>
        <html>
          <head>
            <title>${t.title}</title>
            <script src="https://cdn.tailwindcss.com"><\/script>
            <style>
              body { padding: 2rem; background-color: #0f172a; color: white; }
              pre { white-space: pre-wrap; background: #1e293b; padding: 1rem; border-radius: 0.5rem; }
            </style>
          </head>
          <body>
            <div class="max-w-4xl mx-auto">
              <h1 class="text-2xl font-bold mb-4">${t.title}</h1>
              <p class="text-gray-300 mb-6">${t.description||""}</p>
              <div class="mb-6">
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${c(t.difficulty)} mr-2">
                  ${t.difficulty}
                </span>
                ${t.tags?.map(A=>`
                  <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-700/50 text-gray-300 mr-2">
                    ${A}
                  </span>
                `).join("")}
              </div>
              <pre class="p-4 bg-gray-800 rounded-lg overflow-x-auto">
                <code>${t.prompt.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code>
              </pre>
            </div>
          </body>
        </html>
      `),G.document.close())},[]),$=n.useCallback(t=>{h(t.target.value)},[]),S=n.useCallback(t=>{x(t===i?null:t)},[i]),D=n.useCallback(t=>{l(t===o?null:t)},[o]);Q.useEffect(()=>{},[L,$,S,D]);const j=T(()=>{if(!a)return[];const t=new Map;return a.promptGroups&&a.promptGroups.forEach(c=>{t.set(c.id,c)}),y&&y.filter(c=>c.promptGroupId).forEach(c=>{c.promptGroupId&&"promptGroup"in c&&c.promptGroup&&t.set(c.promptGroupId,c.promptGroup)}),Array.from(t.values())},[a,y]);return C?e("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:e("div",{className:"max-w-7xl mx-auto",children:e(z,{text:"Loading category..."})})}):p?!a||!p.subcategories?.length?e("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-10",children:r("div",{className:"text-center",children:[e(F,{className:"w-16 h-16 mx-auto mb-4 text-purple-400"}),e("h1",{className:"text-3xl font-bold mb-2",children:"No Subcategories Found"}),e("p",{className:"text-gray-300 mb-6",children:"This category doesn't have any subcategories yet."}),r("button",{onClick:()=>g("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[e(M,{className:"w-4 h-4 mr-2 inline"}),"Back to Home"]})]})}):p?r("div",{className:"bg-gradient-to-br from-gray-900 to-gray-950 min-h-screen text-white",children:[e("header",{className:"bg-gray-900/80 backdrop-blur-sm border-b border-gray-800/50 shadow-lg",children:r("div",{className:"container mx-auto px-4 py-6",children:[r("div",{className:"flex items-center gap-4 mb-2",children:[e("button",{onClick:()=>g(-1),className:"p-2 rounded-lg hover:bg-gray-800/50 transition-colors","aria-label":"Go back",children:e(M,{className:"w-5 h-5 text-gray-400"})}),e("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-400 to-pink-500 bg-clip-text text-transparent",children:p.name})]}),p.description&&e("p",{className:"text-gray-400 ml-12 max-w-3xl",children:p.description})]})}),e("div",{className:"container mx-auto px-4 py-8 animate-fade-in",children:r("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e("div",{className:"lg:col-span-3 space-y-6",children:r("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/40 rounded-xl p-5 shadow-lg",children:[r("h2",{className:"text-lg font-semibold text-white mb-5 flex items-center gap-2",children:[e("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),"Navigation"]}),e("nav",{className:"space-y-1.5 mb-6",children:p.subcategories.map(t=>r("button",{onClick:()=>f(t),className:`w-full text-left px-4 py-3 rounded-lg transition-all flex items-center gap-2 ${a?.id===t.id?"bg-gradient-to-r from-purple-600/80 to-pink-600/80 text-white shadow-md shadow-purple-500/20":"text-gray-300 hover:bg-gray-700/40 hover:text-white"}`,children:[t.icon&&e("span",{className:"text-lg",children:t.icon}),e("span",{className:"font-medium",children:t.name}),a?.id===t.id&&e("span",{className:"ml-auto w-2 h-2 bg-white rounded-full"})]},t.id))}),r("div",{className:"space-y-5",children:[r("div",{className:"relative",children:[e("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e("input",{type:"text",placeholder:"Search prompts...",value:u,onChange:t=>h(t.target.value),className:"w-full pl-10 pr-4 py-2.5 text-sm bg-gray-700/50 border border-gray-600/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-transparent transition-all duration-200 text-white placeholder-gray-400"})]}),j.length>0&&r("div",{children:[r("h3",{className:"text-sm font-medium text-gray-400 mb-2.5 flex items-center gap-1.5",children:[e("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"Filter by Group"]}),r("div",{className:"flex flex-wrap gap-2",children:[e("button",{onClick:()=>l(null),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${o?"bg-gray-700/40 text-gray-300 hover:bg-gray-700/70 hover:text-white":"bg-gradient-to-r from-purple-600/80 to-pink-600/80 text-white shadow-md shadow-purple-500/20"}`,children:"All"}),j.map(t=>e("button",{onClick:()=>l(o===t.id?null:t.id),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all ${o===t.id?"bg-gradient-to-r from-purple-600/80 to-pink-600/80 text-white shadow-md shadow-purple-500/20":"bg-gray-700/40 text-gray-300 hover:bg-gray-700/70 hover:text-white"}`,children:t.name},t.id))]})]}),r("div",{children:[r("h3",{className:"text-sm font-medium text-gray-400 mb-2.5 flex items-center gap-1.5",children:[e("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),"Filter by Difficulty"]}),e("div",{className:"flex flex-wrap gap-2",children:[{level:"Beginner",color:"green"},{level:"Intermediate",color:"blue"},{level:"Advanced",color:"purple"}].map(({level:t,color:c})=>r("button",{onClick:()=>x(i===t?null:t),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-all flex items-center gap-1 ${i===t?`bg-${c}-600/80 text-white shadow-md shadow-${c}-500/20`:`bg-gray-700/40 text-${c}-300 hover:bg-${c}-900/20 hover:text-${c}-200`}`,children:[t,i===t&&e("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})]},t))})]}),(o||i)&&r("div",{className:"pt-2 border-t border-gray-700/40",children:[r("div",{className:"flex items-center justify-between mb-2",children:[e("span",{className:"text-xs font-medium text-gray-400",children:"Active Filters"}),e("button",{onClick:()=>{l(null),x(null)},className:"text-xs text-purple-400 hover:text-purple-300 transition-colors",children:"Clear all"})]}),r("div",{className:"flex flex-wrap gap-2",children:[o&&r("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-900/40 text-purple-300 border border-purple-800/50",children:[j.find(t=>t.id===o)?.name,e("button",{onClick:()=>l(null),className:"ml-1.5 -mr-1 p-0.5 hover:bg-purple-800/50 rounded-full",children:e("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]}),i&&r("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-900/40 text-purple-300 border border-purple-800/50",children:[i,e("button",{onClick:()=>x(null),className:"ml-1.5 -mr-1 p-0.5 hover:bg-purple-800/50 rounded-full",children:e("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})})]})]})]})]})]})}),e("div",{className:"lg:col-span-9",children:r("div",{className:"space-y-6",children:[e("div",{className:"bg-gray-800/60 backdrop-blur-sm border border-gray-700/40 rounded-xl p-6 transition-all duration-300 hover:shadow-lg hover:shadow-purple-500/5",children:r("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r("div",{children:[r("h2",{className:"text-2xl font-bold text-white mb-1.5 flex items-center gap-2",children:[a?.icon&&e("span",{className:"text-purple-400",children:a.icon}),a?.name||"Loading..."]}),a?.description&&e("p",{className:"text-gray-400",children:a.description})]}),e("div",{className:"flex items-center",children:e("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-700/50 text-gray-300 border border-gray-600/30",children:R?"Loading...":`${y?.length||0} ${(y?.length||0)===1?"Prompt":"Prompts"}`})})]})}),e(K,{categoryId:s,promptId:a?.id,children:R?e("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:[1,2,3,4,5,6].map(t=>r("div",{className:"bg-gray-800/60 rounded-xl p-6 animate-pulse",children:[e("div",{className:"h-4 bg-gray-700 rounded mb-3"}),e("div",{className:"h-3 bg-gray-700 rounded mb-2"}),e("div",{className:"h-3 bg-gray-700 rounded w-3/4"})]},t))}):w?r("div",{className:"col-span-full text-center py-12",children:[e("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-red-500/10 mb-4",children:e(F,{className:"w-10 h-10 text-red-400"})}),e("h3",{className:"text-xl font-semibold text-white mb-2",children:"Failed to Load Prompts"}),e("p",{className:"text-gray-400 max-w-md mx-auto mb-4",children:"There was an error loading the prompts. Please try again."})]}):e("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:y&&y.length>0?y.map(t=>e("div",{className:"transform transition-transform duration-300 hover:-translate-y-1",children:e(B,{prompt:t,onCopy:()=>k(t.prompt),onOpenInNewTab:()=>b(t)})},t.id)):r("div",{className:"col-span-full text-center py-12",children:[e("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-purple-500/10 mb-4",children:e(J,{className:"w-10 h-10 text-purple-400"})}),e("h3",{className:"text-xl font-semibold text-white mb-2",children:u||i||o?"No matching prompts found":"No prompts available"}),e("p",{className:"text-gray-400 max-w-md mx-auto mb-4",children:u||i||o?"Try adjusting your search or filter criteria.":"This subcategory does not have any prompts yet."}),(u||i||o)&&e("button",{onClick:()=>{h(""),x(null),l(null)},className:"px-4 py-2 text-sm font-medium text-purple-400 hover:text-purple-300 transition-colors border border-purple-500/30 rounded-lg hover:bg-purple-500/10",children:"Clear all filters"})]})})})]})})]})})]}):e("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-10",children:r("div",{className:"text-center",children:[e(F,{className:"w-16 h-16 mx-auto mb-4 text-purple-400"}),e("h1",{className:"text-3xl font-bold mb-2",children:"Category Not Found"}),e("p",{className:"text-gray-300 mb-6",children:"The category you're looking for doesn't exist or has been moved."}),r("button",{onClick:()=>g("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[e(M,{className:"w-4 h-4 mr-2 inline"}),"Back to Home"]})]})}):e("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:r("div",{className:"max-w-7xl mx-auto text-center py-12",children:[e("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:"Category not found"}),e("p",{className:"text-gray-400",children:"The requested category could not be found."}),e("h1",{className:"text-3xl font-bold mb-2",children:"Category Not Found"}),e("p",{className:"text-gray-300 mb-6",children:"The category you're looking for doesn't exist or has been moved."}),r("button",{onClick:()=>g("/"),className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[e(M,{className:"w-4 h-4 mr-2 inline"}),"Back to Home"]})]})})};export{de as default};
